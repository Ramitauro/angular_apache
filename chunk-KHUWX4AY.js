import{a as $,b as B}from"./chunk-PB6ZRJDP.js";import{c as ce,e as le,j as me,r as pe,s as de,t as ue,w as ge,x as _e}from"./chunk-64EURP63.js";import{a as R}from"./chunk-5AHPVKNB.js";import{a as ae,c as se}from"./chunk-55TYXLXT.js";import"./chunk-MZP3BXEJ.js";import{b as re}from"./chunk-5ZQZCC6I.js";import{a as Z,g as ee,h as te,i as ne,m as ie,p as oe}from"./chunk-TLX3ODY4.js";import{Ab as J,B as Q,Bb as X,Cb as S,Db as f,Eb as I,La as o,Qa as E,R as M,U as H,Va as G,X as w,_a as v,a as h,b,ba as d,ca as u,eb as N,fb as c,ib as a,jb as s,kb as _,lb as D,p as T,pb as g,qb as m,ra as q,tb as l,ub as W,vb as C,wb as Y,xb as V,yb as A,zb as O}from"./chunk-OBRB6GQ7.js";var y={RESOURCE_NAME:"cities",ROUTE_PATH:"cities",RESPONSE_KEY:"cities"};var U=new H("ItemsService");function fe(){return{metadata:{pagination:{currentPage:1,perPage:10,totalItems:0,totalPages:0}},data:[]}}var k=class r{http=w(re);backendUrl=R.backend;getItems(i={}){let e=this.buildQueryParams(i),n=`${this.backendUrl}/${y.RESOURCE_NAME}${e}`;return this.http.get(n).pipe(Q(this.handleError("getItems",fe())))}buildQueryParams(i){let e=new URLSearchParams;return i.page&&e.set("page",i.page.toString()),i.size&&e.set("size",i.size.toString()),B(e,"sort",i.sort),B(e,"name",i.name),e.toString()?`?${e.toString()}`:""}handleError(i,e){return n=>(console.error(`${i} failed: ${n.message}`),T(e))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=M({token:r,factory:r.\u0275fac})};var j=[{id:1008,name:"Amsterdam",countryName:"United States",countryIsoNumeric:"US",continentName:"North America",continentCode:"NA"},{id:1006,name:"Detroit",countryName:"United States",countryIsoNumeric:"US",continentName:"North America",continentCode:"NA"},{id:1007,name:"Evanston",countryName:"United States",countryIsoNumeric:"US",continentName:"North America",continentCode:"NA"},{id:1005,name:"Fresno, California",countryName:"United States",countryIsoNumeric:"US",continentName:"North America",continentCode:"NA"},{id:1001,name:"Modesto",countryName:"United States",countryIsoNumeric:"US",continentName:"North America",continentCode:"NA"}];var F=class r{getItems(i={}){let e=i.page??1,n=i.size??j.length,t=(e-1)*n,p=j.slice(t,t+n).map(K=>b(h({},K),{name:`${K.name} Frontend Mock`})),L=j.length,ve=Math.ceil(L/n);return T({metadata:{pagination:{currentPage:e,perPage:n,totalItems:L,totalPages:ve}},data:p})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=M({token:r,factory:r.\u0275fac})};var xe=[k,F,{provide:U,useExisting:R.useDatabase?k:F}];var ye=(r,i)=>({"nga-btn-search-black":r,"nga-btn-search-primary":i}),be=()=>[1,2,3,4,5,10,20,30,40,50],z=r=>({disabled:r}),Se=r=>({active:r}),x=(r,i)=>({"text-primary":r,"text-body-tertiary":i}),P=(r,i,e)=>({"fa-sort":r,"fa-sort-up":i,"fa-sort-down":e});function Pe(r,i){if(r&1){let e=D();a(0,"li",30)(1,"a",31),g("click",function(){let t=d(e).$implicit,p=m(2);return u(p.changePage(t))})("keydown",function(){let t=d(e).$implicit,p=m(2);return u(p.changePage(t))}),l(2),s()()}if(r&2){let e=i.$implicit,n=m(2);c("ngClass",S(2,Se,e===n.pagination.currentPage)),o(2),W(e)}}function we(r,i){if(r&1){let e=D();a(0,"nav",28)(1,"ul",29)(2,"li",30)(3,"a",31),g("click",function(){d(e);let t=m();return u(t.changePage(1))})("keydown",function(){d(e);let t=m();return u(t.changePage(1))}),a(4,"span"),l(5,"\xAB"),s()()(),a(6,"li",30)(7,"a",31),g("click",function(){d(e);let t=m();return u(t.changePage(t.pagination.currentPage-1))})("keydown",function(){d(e);let t=m();return u(t.changePage(t.pagination.currentPage-1))}),a(8,"span"),l(9,"\u2039"),s()()(),v(10,Pe,3,4,"li",32),a(11,"li",30)(12,"a",31),g("click",function(){d(e);let t=m();return u(t.changePage(t.pagination.currentPage+1))})("keydown",function(){d(e);let t=m();return u(t.changePage(t.pagination.currentPage+1))}),a(13,"span"),l(14,"\u203A"),s()()(),a(15,"li",30)(16,"a",31),g("click",function(){d(e);let t=m();return u(t.changePage(t.pagination.totalPages))})("keydown",function(){d(e);let t=m();return u(t.changePage(t.pagination.totalPages))}),a(17,"span"),l(18,"\xBB"),s()()()()()}if(r&2){let e=m();o(2),c("ngClass",S(5,z,e.pagination.currentPage===1)),o(4),c("ngClass",S(7,z,e.pagination.currentPage===1)),o(4),c("ngForOf",e.pagination.pages),o(),c("ngClass",S(9,z,e.pagination.currentPage===e.pagination.totalPages)),o(4),c("ngClass",S(11,z,e.pagination.currentPage===e.pagination.totalPages))}}function Ee(r,i){if(r&1&&(a(0,"option",33),l(1),s()),r&2){let e=i.$implicit;c("value",e),o(),C("",e," ")}}function Ne(r,i){r&1&&(a(0,"div",34)(1,"div",35)(2,"span",36),l(3,"Loading..."),s()()())}function De(r,i){if(r&1){let e=D();a(0,"tr",50),g("click",function(){let t=d(e).$implicit,p=m(3);return u(p.selectItem(t))}),a(1,"td",51),l(2),s(),a(3,"td",51),l(4),s(),a(5,"td",52),l(6),s(),a(7,"td",53),l(8),s(),a(9,"td",52),l(10),s(),a(11,"td",52),l(12),s(),a(13,"td",52),l(14),s(),a(15,"td",52),l(16),s()()}if(r&2){let e=i.$implicit,n=i.index,t=m(3);o(2),W(n+1),o(2),C(" ",(t.pagination.currentPage-1)*t.pagination.perPage+n+1," "),o(),c("ngClass",f(14,x,t.sortColumn==="id"&&(t.sortDirection==="asc"||t.sortDirection==="desc"),t.sortColumn!=="id"||t.sortDirection===null)),o(),C(" ",e.id," "),o(),c("ngClass",f(17,x,t.sortColumn==="name"&&(t.sortDirection==="asc"||t.sortDirection==="desc"),t.sortColumn!=="name"||t.sortDirection===null)),o(),C(" ",e.name," "),o(),c("ngClass",f(20,x,t.sortColumn==="countryName"&&(t.sortDirection==="asc"||t.sortDirection==="desc"),t.sortColumn!=="countryName"||t.sortDirection===null)),o(),C(" ",e.countryName," "),o(),c("ngClass",f(23,x,t.sortColumn==="countryIsoNumeric"&&(t.sortDirection==="asc"||t.sortDirection==="desc"),t.sortColumn!=="countryIsoNumeric"||t.sortDirection===null)),o(),C(" ",e.countryIsoNumeric," "),o(),c("ngClass",f(26,x,t.sortColumn==="continentName"&&(t.sortDirection==="asc"||t.sortDirection==="desc"),t.sortColumn!=="continentName"||t.sortDirection===null)),o(),C(" ",e.continentName," "),o(),c("ngClass",f(29,x,t.sortColumn==="continentCode"&&(t.sortDirection==="asc"||t.sortDirection==="desc"),t.sortColumn!=="continentCode"||t.sortDirection===null)),o(),C(" ",e.continentCode," ")}}function ke(r,i){if(r&1&&(a(0,"tbody")(1,"tr")(2,"td",48),_(3,"strong"),s()(),v(4,De,17,32,"tr",49),a(5,"tr")(6,"td",48),_(7,"strong"),s()()()),r&2){let e=m(2);o(2),N("colspan",9),o(2),c("ngForOf",e.items),o(2),N("colspan",9)}}function Fe(r,i){if(r&1&&(a(0,"tbody")(1,"tr")(2,"td",48)(3,"strong"),l(4),s()()()()),r&2){let e=m(2);o(2),N("colspan",9),o(2),C("No ",e.name_default," available")}}function Te(r,i){if(r&1){let e=D();a(0,"div",37)(1,"div",19)(2,"table",38)(3,"thead")(4,"tr")(5,"th",39),l(6," Page Rank "),s(),a(7,"th",39),l(8," Total Rank "),s(),a(9,"th",40)(10,"span",41),g("click",function(){d(e);let t=m();return u(t.setSort("id"))})("keydown.enter",function(){d(e);let t=m();return u(t.setSort("id"))}),_(11,"i",42),l(12," Id "),s()(),a(13,"th",43)(14,"span",41),g("click",function(){d(e);let t=m();return u(t.setSort("name"))})("keydown.enter",function(){d(e);let t=m();return u(t.setSort("name"))}),_(15,"i",42),l(16," Name "),s()(),a(17,"th",43)(18,"span",41),g("click",function(){d(e);let t=m();return u(t.setSort("countryName"))})("keydown.enter",function(){d(e);let t=m();return u(t.setSort("countryName"))}),_(19,"i",42),l(20," countryName "),s()(),a(21,"th",43)(22,"span",41),g("click",function(){d(e);let t=m();return u(t.setSort("countryIsoNumeric"))})("keydown.enter",function(){d(e);let t=m();return u(t.setSort("countryIsoNumeric"))}),_(23,"i",42),l(24," countryIsoNumeric "),s()(),a(25,"th",43)(26,"span",41),g("click",function(){d(e);let t=m();return u(t.setSort("continentName"))})("keydown.enter",function(){d(e);let t=m();return u(t.setSort("continentName"))}),_(27,"i",42),l(28," Continent Name "),s()(),a(29,"th",43)(30,"span",41),g("click",function(){d(e);let t=m();return u(t.setSort("continentCode"))})("keydown.enter",function(){d(e);let t=m();return u(t.setSort("continentCode"))}),_(31,"i",42),l(32," Continent Code "),s()()()(),v(33,ke,8,3,"tbody",44)(34,Fe,5,2,"tbody",44),a(35,"tfoot")(36,"tr")(37,"td",45)(38,"strong"),l(39),s()(),_(40,"td",46),s(),a(41,"tr")(42,"td",45)(43,"strong"),l(44),s()(),_(45,"td",47),s()()()()()}if(r&2){let e=m();o(9),c("ngClass",f(16,x,e.sortColumn==="id"&&(e.sortDirection==="asc"||e.sortDirection==="desc"),e.sortColumn!=="id"||e.sortDirection===null)),o(2),c("ngClass",I(19,P,e.sortColumn!=="id"||e.sortDirection===null,e.sortColumn==="id"&&e.sortDirection==="asc",e.sortColumn==="id"&&e.sortDirection==="desc")),o(2),c("ngClass",f(23,x,e.sortColumn==="name"&&(e.sortDirection==="asc"||e.sortDirection==="desc"),e.sortColumn!=="name"||e.sortDirection===null)),o(2),c("ngClass",I(26,P,e.sortColumn!=="name"||e.sortDirection===null,e.sortColumn==="name"&&e.sortDirection==="asc",e.sortColumn==="name"&&e.sortDirection==="desc")),o(2),c("ngClass",f(30,x,e.sortColumn==="countryName"&&(e.sortDirection==="asc"||e.sortDirection==="desc"),e.sortColumn!=="countryName"||e.sortDirection===null)),o(2),c("ngClass",I(33,P,e.sortColumn!=="countryName"||e.sortDirection===null,e.sortColumn==="countryName"&&e.sortDirection==="asc",e.sortColumn==="countryName"&&e.sortDirection==="desc")),o(2),c("ngClass",f(37,x,e.sortColumn==="countryIsoNumeric"&&(e.sortDirection==="asc"||e.sortDirection==="desc"),e.sortColumn!=="countryIsoNumeric"||e.sortDirection===null)),o(2),c("ngClass",I(40,P,e.sortColumn!=="countryIsoNumeric"||e.sortDirection===null,e.sortColumn==="countryIsoNumeric"&&e.sortDirection==="asc",e.sortColumn==="countryIsoNumeric"&&e.sortDirection==="desc")),o(2),c("ngClass",f(44,x,e.sortColumn==="isoAlpha3"&&(e.sortDirection==="asc"||e.sortDirection==="desc"),e.sortColumn!=="continentName"||e.sortDirection===null)),o(2),c("ngClass",I(47,P,e.sortColumn!=="continentName"||e.sortDirection===null,e.sortColumn==="continentName"&&e.sortDirection==="asc",e.sortColumn==="continentName"&&e.sortDirection==="desc")),o(2),c("ngClass",f(51,x,e.sortColumn==="isoAlpha3"&&(e.sortDirection==="asc"||e.sortDirection==="desc"),e.sortColumn!=="continentCode"||e.sortDirection===null)),o(2),c("ngClass",I(54,P,e.sortColumn!=="continentCode"||e.sortDirection===null,e.sortColumn==="continentCode"&&e.sortDirection==="asc",e.sortColumn==="continentCode"&&e.sortDirection==="desc")),o(2),c("ngIf",e.items&&e.items.length>0),o(),c("ngIf",!e.items||e.items.length===0),o(5),C("Page Totals : ",e.totals.count,""),o(5),C("Search Totals : ",e.totals.countAll,"")}}var he=class r{constructor(i,e,n,t){this.document=i;this.platformId=e;this.route=n;this.router=t;this.sortColumn="name",this.sortDirection="asc",this.selectedPerPage=this.defaultSelectedPerPage,this.pagination=this.paginationService.initializePagination(this.selectedPerPage)}itemsService=w(U);paginationService=w($);isFiltersOpen=!1;name_default=y.ROUTE_PATH;defaultSelectedPerPage=5;sortColumn=null;sortField=null;sortDirection=null;items;loading=!1;totals={count:0,countAll:0};filters={page:null,size:null,name:null};selectedPerPage;paginationEnabled=!0;pagination;ngOnInit(){this.getQueryParams()}getItems(i){let e=this.sortColumn?this.sortDirection==="asc"?this.sortColumn:`-${this.sortColumn}`:null,n=b(h({},i),{sort:e});this.loading=!0,this.itemsService.getItems(n).subscribe(t=>{let p=t.metadata.pagination.totalItems;this.pagination.totalItems=p,this.items=t.data,this.setTotals(t),this.loading=!1,this.updatePagination()})}setTotals(i){this.totals={count:i.metadata.pagination.perPage,countAll:i.metadata.pagination.totalItems}}setQueryParams(i){let e=h({},i);e.name===""&&(e.name=null),e.code===""&&(e.code=null),e.sort===""&&(e.sort=null);let n=h(h({},this.filters),e),t=y.RESOURCE_NAME;this.router.navigate([t],{queryParams:n})}search(){let i=b(h({},this.filters),{page:this.pagination.currentPage,size:this.pagination.perPage}),e=this.sortColumn?this.sortDirection==="asc"?this.sortColumn:`-${this.sortColumn}`:null,n=b(h({},i),{sort:e});this.setQueryParams(n)}onKeydown(i){i.key==="Enter"&&this.search()}getQueryParams(){this.route.queryParams.subscribe(i=>{this.filters=h(h({},this.filters),i);let{size:e,sort:n}=this.filters||{};e&&(this.selectedPerPage=e),n&&(n.startsWith("-")?(this.sortColumn=n.substring(1),this.sortDirection="desc"):(this.sortColumn=n,this.sortDirection="asc")),this.pagination=this.paginationService.initializePagination(this.selectedPerPage),this.getItems(this.filters)})}updatePagination(){this.pagination.currentPage=Number(this.filters.page)||1,this.pagination.perPage=this.filters.size||this.selectedPerPage,this.setPagination()}createItem(){this.router.navigate([y.RESOURCE_NAME,0])}selectItem(i){this.router.navigate([y.RESOURCE_NAME,i.id])}selectPagination(){this.paginationEnabled=!this.paginationEnabled}setPagination(){this.pagination=this.paginationService.getPagination(this.pagination)}changePage(i){this.pagination.currentPage=i,this.search()}changePerPage(i){let e=parseInt(i,10);this.pagination.perPage=e,this.search()}getGlobalPosition(i){return(this.pagination.currentPage-1)*this.pagination.perPage+i+1}setSort(i,e){this.sortColumn===i?this.sortDirection==="asc"?this.sortDirection="desc":this.sortDirection==="desc"?(this.sortDirection=null,this.sortColumn=null,this.sortField=null):this.sortDirection="asc":(this.sortColumn=i,this.sortField=e||i,this.sortDirection="asc"),this.search()}toggleFilters(){if(oe(this.platformId)){this.isFiltersOpen=!this.isFiltersOpen;let i=this.document.getElementById("collapseFilters");if(i){let e=new bootstrap.Collapse(i,{toggle:!1});this.isFiltersOpen?e.show():e.hide()}}}static \u0275fac=function(e){return new(e||r)(E(Z),E(q),E(ae),E(se))};static \u0275cmp=G({type:r,selectors:[["app-item"]],features:[J([$,xe])],decls:33,vars:16,consts:[[1,"container"],[1,"row","pt-5"],[1,"col-12","d-flex","flex-wrap","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","mb-2","mb-sm-0"],["type","text","id","name","placeholder","",1,"form-control","form-control-sm","me-2",3,"ngModelChange","keydown","ngModel"],["type","button",1,"btn","nga-btn-search","nga-btn-search-primary","btn-sm","me-1",3,"click"],[1,"fa-solid","fa-magnifying-glass"],["type","button","aria-controls","collapseFilters",1,"btn","nga-btn-search","btn-sm","d-flex","align-items-center","me-3",3,"click","ngClass"],[1,"fa-solid","ms-1",3,"ngClass"],["type","button",1,"btn","nga-btn-search","nga-btn-search-primary","btn-sm","me-3",3,"click"],[1,"fa-solid","fa-plus"],["class","d-flex align-items-center","aria-label","Page navigation",4,"ngIf"],[1,"d-none","d-md-flex","align-items-center"],[2,"color","gray"],[1,"d-flex","align-items-center"],["aria-label","Items per page",1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","d-flex justify-content-center m-4",4,"ngIf"],[1,"row","pt-2","pb-1"],[1,"col"],["id","collapseFilters",1,"collapse"],[1,"row","pt-4","pb-4"],[1,"card","card-body"],[1,"card-title","border-bottom","pb-2"],[1,"col-md-2"],["for","filtersName",1,"font-weight-bold","form-label"],["type","text","id","filtersName",1,"form-control",3,"ngModelChange","ngModel"],["class","row pt-2 pb-2",4,"ngIf"],["aria-label","Page navigation",1,"d-flex","align-items-center"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item",3,"ngClass"],["tabindex","0",1,"page-link",3,"click","keydown"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[3,"value"],[1,"d-flex","justify-content-center","m-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"row","pt-2","pb-2"],[1,"table","table-hover","table-striped","table-bordered","table-sm"],[1,"d-none","d-md-table-cell","text-secondary","font-weight-bold","text-center"],[1,"d-none","d-md-table-cell","font-weight-bold","text-center",3,"ngClass"],["role","button","tabindex","0",2,"cursor","pointer",3,"click","keydown.enter"],[1,"fa-solid","me-2",3,"ngClass"],[1,"font-weight-bold","text-center",3,"ngClass"],[4,"ngIf"],["colspan","1",1,"d-none","d-md-table-cell","text-center"],["colspan","8",1,"d-none","d-md-table-cell","text-end","text-secondary"],["colspan","8",1,"text-end","d-none","d-lg-table-cell","d-xl-table-cell","text-secondary"],[1,"text-center"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"d-none","d-md-table-cell","text-center"],[1,"d-none","d-md-table-cell","text-center",2,"cursor","pointer",3,"ngClass"],[1,"text-center",2,"cursor","pointer",3,"ngClass"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),O("ngModelChange",function(p){return A(n.filters.name,p)||(n.filters.name=p),p}),g("keydown",function(p){return n.onKeydown(p)}),s(),a(5,"button",5),g("click",function(){return n.search()}),_(6,"i",6),s(),a(7,"button",7),g("click",function(){return n.toggleFilters()}),l(8," Filters "),_(9,"i",8),s(),a(10,"button",9),g("click",function(){return n.createItem()}),_(11,"i",10),s()(),v(12,we,19,13,"nav",11),a(13,"div",12)(14,"b")(15,"span",13),l(16),s()()(),a(17,"div",14)(18,"select",15),g("ngModelChange",function(p){return n.changePerPage(p)}),O("ngModelChange",function(p){return A(n.selectedPerPage,p)||(n.selectedPerPage=p),p}),v(19,Ee,2,2,"option",16),s()()()(),v(20,Ne,4,0,"div",17),a(21,"div",18)(22,"div",19)(23,"div",20)(24,"div",21)(25,"div",22)(26,"h5",23),l(27,"Search Filters"),s(),a(28,"div",24)(29,"label",25),l(30,"Name"),s(),a(31,"input",26),O("ngModelChange",function(p){return A(n.filters.name,p)||(n.filters.name=p),p}),s()()()()()()(),v(32,Te,46,58,"div",27),s()),e&2&&(o(4),V("ngModel",n.filters.name),o(3),c("ngClass",f(12,ye,n.isFiltersOpen,!n.isFiltersOpen)),N("aria-expanded",n.isFiltersOpen),o(2),c("ngClass",n.isFiltersOpen?"fa-arrow-up-wide-short":"fa-arrow-down-wide-short"),o(3),c("ngIf",n.pagination.useful),o(4),Y("",n.totals.count," sur ",n.totals.countAll,""),o(2),V("ngModel",n.selectedPerPage),o(),c("ngForOf",X(15,be)),o(),c("ngIf",n.loading),o(11),V("ngModel",n.filters.name),o(),c("ngIf",!n.loading))},dependencies:[ie,ee,te,ne,ge,de,ue,ce,pe,le,me,_e],styles:[".nga-btn-search[_ngcontent-%COMP%]{-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12);box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;padding:.5rem;font-size:.81rem;border:0;-webkit-border-radius:.125rem;border-radius:.125rem}.nga-btn-search[_ngcontent-%COMP%]:hover, .nga-btn-search[_ngcontent-%COMP%]:active, .nga-btn-search[_ngcontent-%COMP%]:focus{-webkit-box-shadow:0 5px 11px 0 rgba(0,0,0,.18),0 4px 15px 0 rgba(0,0,0,.15);box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;outline:0}.nga-btn-search-primary[_ngcontent-%COMP%]{border:2px solid #4285f4!important;color:#4285f4!important;background-color:transparent!important}.nga-btn-search-black[_ngcontent-%COMP%]{border:2px solid #000!important;color:#000!important;background-color:transparent!important}.page-link[_ngcontent-%COMP%]{cursor:pointer}"]})};export{he as ItemComponent};
