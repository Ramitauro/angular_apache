import{a as B,b as T}from"./chunk-PB6ZRJDP.js";import{c as se,e as le,j as me,l as ce,r as pe,s as de,t as ge,u as ue,w as _e,x as fe}from"./chunk-64EURP63.js";import{a as R}from"./chunk-5AHPVKNB.js";import{a as oe,c as ae}from"./chunk-55TYXLXT.js";import"./chunk-MZP3BXEJ.js";import{b as re}from"./chunk-5ZQZCC6I.js";import{a as X,g as Z,h as ee,i as te,m as ne,p as ie}from"./chunk-TLX3ODY4.js";import{Ab as Y,B as Q,Bb as J,Cb as y,Db as S,Eb as U,La as o,Qa as E,R as A,U as H,Va as q,X as w,_a as C,a as _,b as v,ba as d,ca as g,eb as M,fb as c,ib as a,jb as s,kb as f,lb as k,p as O,pb as u,qb as p,ra as $,tb as m,ub as z,vb as h,wb as G,xb as x,yb as I,zb as P}from"./chunk-OBRB6GQ7.js";var b={RESOURCE_NAME:"professions",ROUTE_PATH:"professions",RESPONSE_KEY:"professions"};var V=new H("ItemsService");function Ce(){return{metadata:{pagination:{currentPage:1,perPage:10,totalItems:0,totalPages:0}},data:[]}}var F=class r{http=w(re);backendUrl=R.backend;getItems(i={}){let e=this.buildQueryParams(i),t=`${this.backendUrl}/${b.RESOURCE_NAME}${e}`;return this.http.get(t).pipe(Q(this.handleError("getItems",Ce())))}buildQueryParams(i){let e=new URLSearchParams;return i.page&&e.set("page",i.page.toString()),i.size&&e.set("size",i.size.toString()),T(e,"sort",i.sort),T(e,"name",i.name),T(e,"idMin",i.idMin),T(e,"idMax",i.idMax),e.toString()?`?${e.toString()}`:""}handleError(i,e){return t=>(console.error(`${i} failed: ${t.message}`),O(e))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=A({token:r,factory:r.\u0275fac})};var N=[{id:1,name:"Actor"},{id:2,name:"Actress"},{id:3,name:"Animator"},{id:4,name:"Art Director"},{id:5,name:"Associate Producer"},{id:6,name:"Boom Operator"},{id:7,name:"Camera Operator"},{id:8,name:"Casting Director"},{id:9,name:"Cinematographer"},{id:10,name:"Co-Writer"}];var D=class r{getItems(i={}){let e=i.page??1,t=i.size??N.length,n=(e-1)*t,l=N.slice(n,n+t).map(K=>v(_({},K),{name:`${K.name} Frontend Mock`})),L=N.length,Ie=Math.ceil(L/t);return O({metadata:{pagination:{currentPage:e,perPage:t,totalItems:L,totalPages:Ie}},data:l})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=A({token:r,factory:r.\u0275fac})};var be=[F,D,{provide:V,useExisting:R.useDatabase?F:D}];var ye=(r,i)=>({"nga-btn-search-black":r,"nga-btn-search-primary":i}),Se=()=>[1,2,3,4,5,10,20,30,40,50],W=r=>({disabled:r}),we=r=>({active:r}),j=(r,i)=>({"text-primary":r,"text-body-tertiary":i}),ve=(r,i,e)=>({"fa-sort":r,"fa-sort-up":i,"fa-sort-down":e});function Ee(r,i){if(r&1){let e=k();a(0,"li",34)(1,"a",35),u("click",function(){let n=d(e).$implicit,l=p(2);return g(l.changePage(n))})("keydown",function(){let n=d(e).$implicit,l=p(2);return g(l.changePage(n))}),m(2),s()()}if(r&2){let e=i.$implicit,t=p(2);c("ngClass",y(2,we,e===t.pagination.currentPage)),o(2),z(e)}}function Me(r,i){if(r&1){let e=k();a(0,"nav",32)(1,"ul",33)(2,"li",34)(3,"a",35),u("click",function(){d(e);let n=p();return g(n.changePage(1))})("keydown",function(){d(e);let n=p();return g(n.changePage(1))}),a(4,"span"),m(5,"\xAB"),s()()(),a(6,"li",34)(7,"a",35),u("click",function(){d(e);let n=p();return g(n.changePage(n.pagination.currentPage-1))})("keydown",function(){d(e);let n=p();return g(n.changePage(n.pagination.currentPage-1))}),a(8,"span"),m(9,"\u2039"),s()()(),C(10,Ee,3,4,"li",36),a(11,"li",34)(12,"a",35),u("click",function(){d(e);let n=p();return g(n.changePage(n.pagination.currentPage+1))})("keydown",function(){d(e);let n=p();return g(n.changePage(n.pagination.currentPage+1))}),a(13,"span"),m(14,"\u203A"),s()()(),a(15,"li",34)(16,"a",35),u("click",function(){d(e);let n=p();return g(n.changePage(n.pagination.totalPages))})("keydown",function(){d(e);let n=p();return g(n.changePage(n.pagination.totalPages))}),a(17,"span"),m(18,"\xBB"),s()()()()()}if(r&2){let e=p();o(2),c("ngClass",y(5,W,e.pagination.currentPage===1)),o(4),c("ngClass",y(7,W,e.pagination.currentPage===1)),o(4),c("ngForOf",e.pagination.pages),o(),c("ngClass",y(9,W,e.pagination.currentPage===e.pagination.totalPages)),o(4),c("ngClass",y(11,W,e.pagination.currentPage===e.pagination.totalPages))}}function ke(r,i){if(r&1&&(a(0,"option",37),m(1),s()),r&2){let e=i.$implicit;c("value",e),o(),h("",e," ")}}function Te(r,i){r&1&&(a(0,"div",38)(1,"div",39)(2,"span",40),m(3,"Loading..."),s()()())}function Fe(r,i){if(r&1){let e=k();a(0,"tr",54),u("click",function(){let n=d(e).$implicit,l=p(3);return g(l.selectItem(n))}),a(1,"td",55),m(2),s(),a(3,"td",55),m(4),s(),a(5,"td",56),m(6),s(),a(7,"td",57),m(8),s()()}if(r&2){let e=i.$implicit,t=i.index,n=p(3);o(2),z(t+1),o(2),h(" ",(n.pagination.currentPage-1)*n.pagination.perPage+t+1," "),o(),c("ngClass",S(6,j,n.sortColumn==="id"&&(n.sortDirection==="asc"||n.sortDirection==="desc"),n.sortColumn!=="id"||n.sortDirection===null)),o(),h(" ",e.id," "),o(),c("ngClass",S(9,j,n.sortColumn==="name"&&(n.sortDirection==="asc"||n.sortDirection==="desc"),n.sortColumn!=="name"||n.sortDirection===null)),o(),h(" ",e.name," ")}}function De(r,i){if(r&1&&(a(0,"tbody")(1,"tr")(2,"td",52),f(3,"strong"),s()(),C(4,Fe,9,12,"tr",53),a(5,"tr")(6,"td",52),f(7,"strong"),s()()()),r&2){let e=p(2);o(2),M("colspan",4),o(2),c("ngForOf",e.items),o(2),M("colspan",4)}}function Oe(r,i){if(r&1&&(a(0,"tbody")(1,"tr")(2,"td",52)(3,"strong"),m(4),s()()()()),r&2){let e=p(2);o(2),M("colspan",4),o(2),h("No ",e.name_default," available")}}function Ae(r,i){if(r&1){let e=k();a(0,"div",41)(1,"div",19)(2,"table",42)(3,"thead")(4,"tr")(5,"th",43),m(6," Page Rank "),s(),a(7,"th",43),m(8," Total Rank "),s(),a(9,"th",44)(10,"span",45),u("click",function(){d(e);let n=p();return g(n.setSort("id"))})("keydown.enter",function(){d(e);let n=p();return g(n.setSort("id"))}),f(11,"i",46),m(12," Id "),s()(),a(13,"th",47)(14,"span",45),u("click",function(){d(e);let n=p();return g(n.setSort("name"))})("keydown.enter",function(){d(e);let n=p();return g(n.setSort("name"))}),f(15,"i",46),m(16," Name "),s()()()(),C(17,De,8,3,"tbody",48)(18,Oe,5,2,"tbody",48),a(19,"tfoot")(20,"tr")(21,"td",49)(22,"strong"),m(23),s()(),f(24,"td",50),s(),a(25,"tr")(26,"td",49)(27,"strong"),m(28),s()(),f(29,"td",51),s()()()()()}if(r&2){let e=p();o(9),c("ngClass",S(8,j,e.sortColumn==="id"&&(e.sortDirection==="asc"||e.sortDirection==="desc"),e.sortColumn!=="id"||e.sortDirection===null)),o(2),c("ngClass",U(11,ve,e.sortColumn!=="id"||e.sortDirection===null,e.sortColumn==="id"&&e.sortDirection==="asc",e.sortColumn==="id"&&e.sortDirection==="desc")),o(2),c("ngClass",S(15,j,e.sortColumn==="name"&&(e.sortDirection==="asc"||e.sortDirection==="desc"),e.sortColumn!=="name"||e.sortDirection===null)),o(2),c("ngClass",U(18,ve,e.sortColumn!=="name"||e.sortDirection===null,e.sortColumn==="name"&&e.sortDirection==="asc",e.sortColumn==="name"&&e.sortDirection==="desc")),o(2),c("ngIf",e.items&&e.items.length>0),o(),c("ngIf",!e.items||e.items.length===0),o(5),h("Page Totals : ",e.totals.count,""),o(5),h("Search Totals : ",e.totals.countAll,"")}}var xe=class r{constructor(i,e,t,n){this.document=i;this.platformId=e;this.route=t;this.router=n;this.sortColumn="name",this.sortDirection="asc",this.selectedPerPage=this.defaultSelectedPerPage,this.pagination=this.paginationService.initializePagination(this.selectedPerPage)}itemsService=w(V);paginationService=w(B);isFiltersOpen=!1;name_default=b.ROUTE_PATH;defaultSelectedPerPage=5;sortColumn=null;sortField=null;sortDirection=null;items;loading=!1;totals={count:0,countAll:0};filters={page:null,size:null,name:null,idMin:null,idMax:null};selectedPerPage;paginationEnabled=!0;pagination;ngOnInit(){this.getQueryParams()}getItems(i){let e=this.sortColumn?this.sortDirection==="asc"?this.sortColumn:`-${this.sortColumn}`:null,t=v(_({},i),{sort:e});this.loading=!0,this.itemsService.getItems(t).subscribe(n=>{let l=n.metadata.pagination.totalItems;this.pagination.totalItems=l,this.items=n.data,this.setTotals(n),this.loading=!1,this.updatePagination()})}setTotals(i){this.totals={count:i.metadata.pagination.perPage,countAll:i.metadata.pagination.totalItems}}setQueryParams(i){let e=_({},i);e.name===""&&(e.name=null),e.code===""&&(e.code=null),e.sort===""&&(e.sort=null);let t=_(_({},this.filters),e),n=b.RESOURCE_NAME;this.router.navigate([n],{queryParams:t})}search(){let i=v(_({},this.filters),{page:this.pagination.currentPage,size:this.pagination.perPage}),e=this.sortColumn?this.sortDirection==="asc"?this.sortColumn:`-${this.sortColumn}`:null,t=v(_({},i),{sort:e});this.setQueryParams(t)}onKeydown(i){i.key==="Enter"&&this.search()}getQueryParams(){this.route.queryParams.subscribe(i=>{this.filters=_(_({},this.filters),i);let{size:e,sort:t}=this.filters||{};e&&(this.selectedPerPage=e),t&&(t.startsWith("-")?(this.sortColumn=t.substring(1),this.sortDirection="desc"):(this.sortColumn=t,this.sortDirection="asc")),this.pagination=this.paginationService.initializePagination(this.selectedPerPage),this.getItems(this.filters)})}updatePagination(){this.pagination.currentPage=Number(this.filters.page)||1,this.pagination.perPage=this.filters.size||this.selectedPerPage,this.setPagination()}createItem(){this.router.navigate([b.RESOURCE_NAME,0])}selectItem(i){this.router.navigate([b.RESOURCE_NAME,i.id])}selectPagination(){this.paginationEnabled=!this.paginationEnabled}setPagination(){this.pagination=this.paginationService.getPagination(this.pagination)}changePage(i){this.pagination.currentPage=i,this.search()}changePerPage(i){let e=parseInt(i,10);this.pagination.perPage=e,this.search()}getGlobalPosition(i){return(this.pagination.currentPage-1)*this.pagination.perPage+i+1}setSort(i,e){this.sortColumn===i?this.sortDirection==="asc"?this.sortDirection="desc":this.sortDirection==="desc"?(this.sortDirection=null,this.sortColumn=null,this.sortField=null):this.sortDirection="asc":(this.sortColumn=i,this.sortField=e||i,this.sortDirection="asc"),this.search()}toggleFilters(){if(ie(this.platformId)){this.isFiltersOpen=!this.isFiltersOpen;let i=this.document.getElementById("collapseFilters");if(i){let e=new bootstrap.Collapse(i,{toggle:!1});this.isFiltersOpen?e.show():e.hide()}}}static \u0275fac=function(e){return new(e||r)(E(X),E($),E(oe),E(ae))};static \u0275cmp=q({type:r,selectors:[["app-item"]],features:[Y([B,be])],decls:39,vars:18,consts:[[1,"container"],[1,"row","pt-5"],[1,"col-12","d-flex","flex-wrap","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","mb-2","mb-sm-0"],["type","text","id","name","placeholder","",1,"form-control","form-control-sm","me-2",3,"ngModelChange","keydown","ngModel"],["type","button",1,"btn","nga-btn-search","nga-btn-search-primary","btn-sm","me-1",3,"click"],[1,"fa-solid","fa-magnifying-glass"],["type","button","aria-controls","collapseFilters",1,"btn","nga-btn-search","btn-sm","d-flex","align-items-center","me-3",3,"click","ngClass"],[1,"fa-solid","ms-1",3,"ngClass"],["type","button",1,"btn","nga-btn-search","nga-btn-search-primary","btn-sm","me-3",3,"click"],[1,"fa-solid","fa-plus"],["class","d-flex align-items-center","aria-label","Page navigation",4,"ngIf"],[1,"d-none","d-md-flex","align-items-center"],[2,"color","gray"],[1,"d-flex","align-items-center"],["aria-label","Items per page",1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","d-flex justify-content-center m-4",4,"ngIf"],[1,"row","pt-2","pb-1"],[1,"col"],["id","collapseFilters",1,"collapse"],[1,"row","pt-4","pb-4"],[1,"card","card-body"],[1,"card-title","border-bottom","pb-2"],[1,"row"],[1,"col-md-2"],["for","idMin",1,"form-label"],["type","number","id","idMin","min","0","oninput","validity.valid||(value='');",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["type","number","id","idMax","min","0","oninput","validity.valid||(value='');",1,"form-control",3,"ngModelChange","ngModel"],["for","filtersName",1,"font-weight-bold","form-label"],["type","text","id","filtersName",1,"form-control",3,"ngModelChange","ngModel"],["class","row pt-2 pb-2",4,"ngIf"],["aria-label","Page navigation",1,"d-flex","align-items-center"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item",3,"ngClass"],["tabindex","0",1,"page-link",3,"click","keydown"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[3,"value"],[1,"d-flex","justify-content-center","m-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"row","pt-2","pb-2"],[1,"table","table-hover","table-striped","table-bordered","table-sm"],[1,"d-none","d-md-table-cell","text-secondary","font-weight-bold","text-center"],[1,"d-none","d-md-table-cell","font-weight-bold","text-center",3,"ngClass"],["role","button","tabindex","0",3,"click","keydown.enter"],[1,"fa-solid","me-2",3,"ngClass"],[1,"font-weight-bold","text-center",3,"ngClass"],[4,"ngIf"],["colspan","1",1,"d-none","d-md-table-cell","text-center"],["colspan","3",1,"d-none","d-md-table-cell","text-end","text-secondary"],["colspan","3",1,"text-end","d-none","d-lg-table-cell","d-xl-table-cell","text-secondary"],[1,"text-center"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"d-none","d-md-table-cell","text-center"],[1,"d-none","d-md-table-cell","text-center",2,"cursor","pointer",3,"ngClass"],[1,"text-center",2,"cursor","pointer",3,"ngClass"]],template:function(e,t){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),P("ngModelChange",function(l){return I(t.filters.name,l)||(t.filters.name=l),l}),u("keydown",function(l){return t.onKeydown(l)}),s(),a(5,"button",5),u("click",function(){return t.search()}),f(6,"i",6),s(),a(7,"button",7),u("click",function(){return t.toggleFilters()}),m(8," Filters "),f(9,"i",8),s(),a(10,"button",9),u("click",function(){return t.createItem()}),f(11,"i",10),s()(),C(12,Me,19,13,"nav",11),a(13,"div",12)(14,"b")(15,"span",13),m(16),s()()(),a(17,"div",14)(18,"select",15),u("ngModelChange",function(l){return t.changePerPage(l)}),P("ngModelChange",function(l){return I(t.selectedPerPage,l)||(t.selectedPerPage=l),l}),C(19,ke,2,2,"option",16),s()()()(),C(20,Te,4,0,"div",17),a(21,"div",18)(22,"div",19)(23,"div",20)(24,"div",21)(25,"div",22)(26,"h5",23),m(27,"Search Filters"),s(),a(28,"div",24)(29,"div",25)(30,"label",26),m(31,"Id"),s(),a(32,"input",27),P("ngModelChange",function(l){return I(t.filters.idMin,l)||(t.filters.idMin=l),l}),s(),a(33,"input",28),P("ngModelChange",function(l){return I(t.filters.idMax,l)||(t.filters.idMax=l),l}),s()(),a(34,"div",25)(35,"label",29),m(36,"Name"),s(),a(37,"input",30),P("ngModelChange",function(l){return I(t.filters.name,l)||(t.filters.name=l),l}),s()()()()()()()(),C(38,Ae,30,22,"div",31),s()),e&2&&(o(4),x("ngModel",t.filters.name),o(3),c("ngClass",S(14,ye,t.isFiltersOpen,!t.isFiltersOpen)),M("aria-expanded",t.isFiltersOpen),o(2),c("ngClass",t.isFiltersOpen?"fa-arrow-up-wide-short":"fa-arrow-down-wide-short"),o(3),c("ngIf",t.pagination.useful),o(4),G("",t.totals.count," sur ",t.totals.countAll,""),o(2),x("ngModel",t.selectedPerPage),o(),c("ngForOf",J(17,Se)),o(),c("ngIf",t.loading),o(12),x("ngModel",t.filters.idMin),o(),x("ngModel",t.filters.idMax),o(4),x("ngModel",t.filters.name),o(),c("ngIf",!t.loading))},dependencies:[ne,Z,ee,te,_e,de,ge,se,ce,pe,le,ue,me,fe],styles:[".nga-btn-search[_ngcontent-%COMP%]{-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12);box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;padding:.5rem;font-size:.81rem;border:0;-webkit-border-radius:.125rem;border-radius:.125rem}.nga-btn-search[_ngcontent-%COMP%]:hover, .nga-btn-search[_ngcontent-%COMP%]:active, .nga-btn-search[_ngcontent-%COMP%]:focus{-webkit-box-shadow:0 5px 11px 0 rgba(0,0,0,.18),0 4px 15px 0 rgba(0,0,0,.15);box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;outline:0}.nga-btn-search-primary[_ngcontent-%COMP%]{border:2px solid #4285f4!important;color:#4285f4!important;background-color:transparent!important}.nga-btn-search-black[_ngcontent-%COMP%]{border:2px solid #000!important;color:#000!important;background-color:transparent!important}.page-link[_ngcontent-%COMP%]{cursor:pointer}"]})};export{xe as ItemComponent};
