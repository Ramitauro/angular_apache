import{a as $,b as L}from"./chunk-PB6ZRJDP.js";import{c as pe,e as de,j as ge,r as ue,s as _e,t as fe,w as he,x as Ce}from"./chunk-64EURP63.js";import{a as R}from"./chunk-5AHPVKNB.js";import{a as ce,c as me}from"./chunk-55TYXLXT.js";import"./chunk-MZP3BXEJ.js";import{b as le}from"./chunk-5ZQZCC6I.js";import{a as te,g as ne,h as ie,i as re,j as oe,m as ae,p as se}from"./chunk-TLX3ODY4.js";import{Ab as Z,B as Q,Bb as ee,Cb as y,Db as h,Eb as E,Fb as U,Hb as W,La as o,Qa as S,R as M,U as G,Va as J,X as P,_a as C,a as _,b as I,ba as d,ca as g,eb as Y,fb as l,ib as a,jb as s,kb as f,lb as w,p as T,pb as u,qb as m,ra as q,tb as c,ub as D,vb as b,wb as X,xb as O,yb as V,zb as A}from"./chunk-OBRB6GQ7.js";var v={RESOURCE_NAME:"persons",ROUTE_PATH:"persons",RESPONSE_KEY:"persons"};var N=new G("ItemsService");function be(){return{metadata:{pagination:{currentPage:1,perPage:10,totalItems:0,totalPages:0}},data:[]}}var k=class r{http=P(le);backendUrl=R.backend;getItems(i={}){let e=this.buildQueryParams(i),n=`${this.backendUrl}/${v.RESOURCE_NAME}${e}`;return this.http.get(n).pipe(Q(this.handleError("getItems",be())))}buildQueryParams(i){let e=new URLSearchParams;return i.page&&e.set("page",i.page.toString()),i.size&&e.set("size",i.size.toString()),L(e,"sort",i.sort),L(e,"name",i.name),e.toString()?`?${e.toString()}`:""}handleError(i,e){return n=>(console.error(`${i} failed: ${n.message}`),T(e))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=M({token:r,factory:r.\u0275fac})};var j=[{id:1016,name:"Akira Kurosawa",birthDate:"1910-03-23",deathDate:null},{id:1033,name:"Alejandro Gonz\xE1lez I\xF1\xE1rritu",birthDate:"1963-08-15",deathDate:null},{id:1005,name:"Alfred Hitchcock",birthDate:"1899-08-13",deathDate:null},{id:1034,name:"Ang Lee",birthDate:"1954-10-23",deathDate:null},{id:1036,name:"Bong Joon-ho",birthDate:"1969-09-14",deathDate:null}];var F=class r{getItems(i={}){let e=i.page??1,n=i.size??j.length,t=(e-1)*n,p=j.slice(t,t+n).map(H=>I(_({},H),{name:`${H.name} Frontend Mock`})),K=j.length,ye=Math.ceil(K/n);return T({metadata:{pagination:{currentPage:e,perPage:n,totalItems:K,totalPages:ye}},data:p})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=M({token:r,factory:r.\u0275fac})};var ve=[k,F,{provide:N,useExisting:R.useDatabase?k:F}];var Se=(r,i)=>({"nga-btn-search-black":r,"nga-btn-search-primary":i}),we=()=>[1,2,3,4,5,10,20],z=r=>({disabled:r}),De=r=>({active:r}),x=(r,i)=>({"text-primary":r,"text-body-tertiary":i}),B=(r,i,e)=>({"fa-sort":r,"fa-sort-up":i,"fa-sort-down":e});function Ee(r,i){if(r&1){let e=w();a(0,"li",31)(1,"a",32),u("click",function(){let t=d(e).$implicit,p=m(2);return g(p.changePage(t))})("keydown",function(){let t=d(e).$implicit,p=m(2);return g(p.changePage(t))}),c(2),s()()}if(r&2){let e=i.$implicit,n=m(2);l("ngClass",y(2,De,e===n.pagination.currentPage)),o(2),D(e)}}function ke(r,i){if(r&1){let e=w();a(0,"nav",29)(1,"ul",30)(2,"li",31)(3,"a",32),u("click",function(){d(e);let t=m();return g(t.changePage(1))})("keydown",function(){d(e);let t=m();return g(t.changePage(1))}),a(4,"span"),c(5,"\xAB"),s()()(),a(6,"li",31)(7,"a",32),u("click",function(){d(e);let t=m();return g(t.changePage(t.pagination.currentPage-1))})("keydown",function(){d(e);let t=m();return g(t.changePage(t.pagination.currentPage-1))}),a(8,"span"),c(9,"\u2039"),s()()(),C(10,Ee,3,4,"li",33),a(11,"li",31)(12,"a",32),u("click",function(){d(e);let t=m();return g(t.changePage(t.pagination.currentPage+1))})("keydown",function(){d(e);let t=m();return g(t.changePage(t.pagination.currentPage+1))}),a(13,"span"),c(14,"\u203A"),s()()(),a(15,"li",31)(16,"a",32),u("click",function(){d(e);let t=m();return g(t.changePage(t.pagination.totalPages))})("keydown",function(){d(e);let t=m();return g(t.changePage(t.pagination.totalPages))}),a(17,"span"),c(18,"\xBB"),s()()()()()}if(r&2){let e=m();o(2),l("ngClass",y(5,z,e.pagination.currentPage===1)),o(4),l("ngClass",y(7,z,e.pagination.currentPage===1)),o(4),l("ngForOf",e.pagination.pages),o(),l("ngClass",y(9,z,e.pagination.currentPage===e.pagination.totalPages)),o(4),l("ngClass",y(11,z,e.pagination.currentPage===e.pagination.totalPages))}}function Fe(r,i){if(r&1&&(a(0,"option",34),c(1),s()),r&2){let e=i.$implicit;l("value",e),o(),D(e)}}function Te(r,i){r&1&&(a(0,"div",35)(1,"div",36)(2,"span",37),c(3,"Loading..."),s()()())}function Me(r,i){if(r&1){let e=w();a(0,"tr",49),u("click",function(){let t=d(e).$implicit,p=m(3);return g(p.selectItem(t))}),a(1,"td",50),c(2),s(),a(3,"td",50),c(4),s(),a(5,"td",51),c(6),s(),a(7,"td",52),c(8),s(),a(9,"td",52),c(10),U(11,"date"),s(),a(12,"td",53),c(13),U(14,"date"),s()()}if(r&2){let e=i.$implicit,n=i.index,t=m(3);o(2),D(n+1),o(2),D(t.getGlobalPosition(n)),o(),l("ngClass",h(16,x,t.sortColumn==="id"&&(t.sortDirection==="asc"||t.sortDirection==="desc"),t.sortColumn!=="id"||t.sortDirection===null)),o(),b(" ",e.id," "),o(),l("ngClass",h(19,x,t.sortColumn==="name"&&(t.sortDirection==="asc"||t.sortDirection==="desc"),t.sortColumn!=="name"||t.sortDirection===null)),o(),b(" ",e.name," "),o(),l("ngClass",h(22,x,t.sortColumn==="birthDate"&&(t.sortDirection==="asc"||t.sortDirection==="desc"),t.sortColumn!=="birthDate"||t.sortDirection===null)),o(),b(" ",W(11,10,e.birthDate,"dd/MM/yyyy")," "),o(2),l("ngClass",h(25,x,t.sortColumn==="deathDate"&&(t.sortDirection==="asc"||t.sortDirection==="desc"),t.sortColumn!=="deathDate"||t.sortDirection===null)),o(),b(" ",W(14,13,e.deathDate,"dd/MM/yyyy")," ")}}function Oe(r,i){if(r&1&&(a(0,"tbody")(1,"tr")(2,"td",47),f(3,"strong"),s()(),C(4,Me,15,28,"tr",48),a(5,"tr")(6,"td",47),f(7,"strong"),s()()()),r&2){let e=m(2);o(4),l("ngForOf",e.items)}}function Ve(r,i){if(r&1&&(a(0,"tbody")(1,"tr")(2,"td",47)(3,"strong"),c(4),s()()()()),r&2){let e=m(2);o(4),b("No ",e.name_default," available")}}function Ae(r,i){if(r&1){let e=w();a(0,"div",38)(1,"div",19)(2,"table",39)(3,"thead")(4,"tr")(5,"th",40),c(6," Page Rank "),s(),a(7,"th",40),c(8," Total Rank "),s(),a(9,"th",41)(10,"span",42),u("click",function(){d(e);let t=m();return g(t.setSort("id"))})("keydown.enter",function(){d(e);let t=m();return g(t.setSort("id"))}),f(11,"i",43),c(12," Id "),s()(),a(13,"th",44)(14,"span",42),u("click",function(){d(e);let t=m();return g(t.setSort("name"))})("keydown.enter",function(){d(e);let t=m();return g(t.setSort("name"))}),f(15,"i",43),c(16," Name "),s()(),a(17,"th",44)(18,"span",42),u("click",function(){d(e);let t=m();return g(t.setSort("birthDate"))})("keydown.enter",function(){d(e);let t=m();return g(t.setSort("birthDate"))}),f(19,"i",43),c(20," Birth Date "),s()(),a(21,"th",41)(22,"span",42),u("click",function(){d(e);let t=m();return g(t.setSort("deathDate"))})("keydown.enter",function(){d(e);let t=m();return g(t.setSort("deathDate"))}),f(23,"i",43),c(24," Death Date "),s()()()(),C(25,Oe,8,1,"tbody",45)(26,Ve,5,1,"tbody",45),a(27,"tfoot")(28,"tr")(29,"td",46)(30,"strong"),c(31),s()()(),a(32,"tr")(33,"td",46)(34,"strong"),c(35),s()()()()()()()}if(r&2){let e=m();o(9),l("ngClass",h(12,x,e.sortColumn==="id"&&(e.sortDirection==="asc"||e.sortDirection==="desc"),e.sortColumn!=="id"||e.sortDirection===null)),o(2),l("ngClass",E(15,B,e.sortColumn!=="id"||e.sortDirection===null,e.sortColumn==="id"&&e.sortDirection==="asc",e.sortColumn==="id"&&e.sortDirection==="desc")),o(2),l("ngClass",h(19,x,e.sortColumn==="name"&&(e.sortDirection==="asc"||e.sortDirection==="desc"),e.sortColumn!=="name"||e.sortDirection===null)),o(2),l("ngClass",E(22,B,e.sortColumn!=="name"||e.sortDirection===null,e.sortColumn==="name"&&e.sortDirection==="asc",e.sortColumn==="name"&&e.sortDirection==="desc")),o(2),l("ngClass",h(26,x,e.sortColumn==="birthDate"&&(e.sortDirection==="asc"||e.sortDirection==="desc"),e.sortColumn!=="birthDate"||e.sortDirection===null)),o(2),l("ngClass",E(29,B,e.sortColumn!=="birthDate"||e.sortDirection===null,e.sortColumn==="birthDate"&&e.sortDirection==="asc",e.sortColumn==="birthDate"&&e.sortDirection==="desc")),o(2),l("ngClass",h(33,x,e.sortColumn==="deathDate"&&(e.sortDirection==="asc"||e.sortDirection==="desc"),e.sortColumn!=="deathDate"||e.sortDirection===null)),o(2),l("ngClass",E(36,B,e.sortColumn!=="deathDate"||e.sortDirection===null,e.sortColumn==="deathDate"&&e.sortDirection==="asc",e.sortColumn==="deathDate"&&e.sortDirection==="desc")),o(2),l("ngIf",e.items&&e.items.length>0),o(),l("ngIf",!e.items||e.items.length===0),o(5),b("Page Totals : ",e.totals.count,""),o(4),b("Search Totals : ",e.totals.countAll,"")}}var Ie=class r{constructor(i,e,n,t){this.document=i;this.platformId=e;this.route=n;this.router=t;this.sortColumn="name",this.sortDirection="asc",this.selectedPerPage=this.defaultSelectedPerPage,this.pagination=this.paginationService.initializePagination(this.selectedPerPage)}itemsService=P(N);paginationService=P($);isFiltersOpen=!1;name_default=v.ROUTE_PATH;defaultSelectedPerPage=5;sortColumn=null;sortField=null;sortDirection=null;items;loading=!1;totals={count:0,countAll:0};filters={page:null,size:null,name:null,birthDateMin:null,birthDateMax:null,deathDateMin:null,deathDateMax:null};selectedPerPage;paginationEnabled=!0;pagination;ngOnInit(){this.getQueryParams()}getItems(i){let e=this.sortColumn?this.sortDirection==="asc"?this.sortColumn:`-${this.sortColumn}`:null,n=I(_({},i),{sort:e});this.loading=!0,this.itemsService.getItems(n).subscribe(t=>{let p=t.metadata.pagination.totalItems;this.pagination.totalItems=p,this.items=t.data,this.setTotals(t),this.loading=!1,this.updatePagination()})}setTotals(i){this.totals={count:i.metadata.pagination.perPage,countAll:i.metadata.pagination.totalItems}}setQueryParams(i){let e=_({},i);e.name===""&&(e.name=null),e.code===""&&(e.code=null),e.sort===""&&(e.sort=null);let n=_(_({},this.filters),e),t=v.RESOURCE_NAME;this.router.navigate([t],{queryParams:n})}search(){let i=I(_({},this.filters),{page:this.pagination.currentPage,size:this.pagination.perPage}),e=this.sortColumn?this.sortDirection==="asc"?this.sortColumn:`-${this.sortColumn}`:null,n=I(_({},i),{sort:e});this.setQueryParams(n)}onKeydown(i){i.key==="Enter"&&this.search()}getQueryParams(){this.route.queryParams.subscribe(i=>{this.filters=_(_({},this.filters),i);let{size:e,sort:n}=this.filters||{};e&&(this.selectedPerPage=e),n&&(n.startsWith("-")?(this.sortColumn=n.substring(1),this.sortDirection="desc"):(this.sortColumn=n,this.sortDirection="asc")),this.pagination=this.paginationService.initializePagination(this.selectedPerPage),this.getItems(this.filters)})}updatePagination(){this.pagination.currentPage=Number(this.filters.page)||1,this.pagination.perPage=this.filters.size||this.selectedPerPage,this.setPagination()}createItem(){this.router.navigate([v.RESOURCE_NAME,0])}selectItem(i){this.router.navigate([v.RESOURCE_NAME,i.id])}selectPagination(){this.paginationEnabled=!this.paginationEnabled}setPagination(){this.pagination=this.paginationService.getPagination(this.pagination)}changePage(i){this.pagination.currentPage=i,this.search()}changePerPage(i){let e=parseInt(i,10);this.pagination.perPage=e,this.search()}getGlobalPosition(i){return(this.pagination.currentPage-1)*this.pagination.perPage+i+1}setSort(i,e){this.sortColumn===i?this.sortDirection==="asc"?this.sortDirection="desc":this.sortDirection==="desc"?(this.sortDirection=null,this.sortColumn=null,this.sortField=null):this.sortDirection="asc":(this.sortColumn=i,this.sortField=e||i,this.sortDirection="asc"),this.search()}toggleFilters(){if(se(this.platformId)){this.isFiltersOpen=!this.isFiltersOpen;let i=this.document.getElementById("collapseFilters");if(i){let e=new bootstrap.Collapse(i,{toggle:!1});this.isFiltersOpen?e.show():e.hide()}}}static \u0275fac=function(e){return new(e||r)(S(te),S(q),S(ce),S(me))};static \u0275cmp=J({type:r,selectors:[["app-item"]],features:[Z([$,ve])],decls:34,vars:16,consts:[[1,"container"],[1,"row","pt-5"],[1,"col-12","d-flex","flex-wrap","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","mb-2","mb-sm-0"],["type","text","id","name","placeholder","",1,"form-control","form-control-sm","me-2",3,"ngModelChange","keydown","ngModel"],["type","button",1,"btn","nga-btn-search","nga-btn-search-primary","btn-sm","me-1",3,"click"],[1,"fa-solid","fa-magnifying-glass"],["type","button","aria-controls","collapseFilters",1,"btn","nga-btn-search","btn-sm","d-flex","align-items-center","me-3",3,"click","ngClass"],[1,"fa-solid","ms-1",3,"ngClass"],["type","button",1,"btn","nga-btn-search","nga-btn-search-primary","btn-sm",3,"click"],[1,"fa-solid","fa-plus"],["class","d-flex align-items-center me-3","aria-label","Page navigation",4,"ngIf"],[1,"d-none","d-md-flex","align-items-center"],[2,"color","gray"],[1,"d-flex","align-items-center"],["aria-label","Items per page",1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","d-flex justify-content-center m-4",4,"ngIf"],[1,"row","pt-2","pb-1"],[1,"col"],["id","collapseFilters",1,"collapse"],[1,"row","pt-4","pb-4"],[1,"card","card-body"],[1,"card-title","border-bottom","pb-2"],[1,"row"],[1,"col-md-2"],["for","filtersName",1,"text-primary","font-weight-bold","form-label"],["type","text","id","filtersName",1,"form-control","text-primary",3,"ngModelChange","ngModel"],["class","row pt-2 pb-2",4,"ngIf"],["aria-label","Page navigation",1,"d-flex","align-items-center","me-3"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item",3,"ngClass"],["tabindex","0",1,"page-link",3,"click","keydown"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[3,"value"],[1,"d-flex","justify-content-center","m-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"row","pt-2","pb-2"],[1,"table","table-hover","table-striped","table-bordered","table-sm"],[1,"d-none","d-md-table-cell","text-secondary","font-weight-bold","text-center"],[1,"d-none","d-md-table-cell","font-weight-bold","text-center",3,"ngClass"],["role","button","tabindex","0",2,"cursor","pointer",3,"click","keydown.enter"],[1,"fa-solid","me-2",3,"ngClass"],[1,"font-weight-bold","text-center",3,"ngClass"],[4,"ngIf"],["colspan","6",1,"d-none","d-md-table-cell","text-center"],["colspan","10",1,"text-center"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"d-none","d-md-table-cell","text-center"],[1,"d-none","d-md-table-cell","text-center",3,"ngClass"],[1,"text-center",2,"cursor","pointer",3,"ngClass"],[1,"d-none","d-md-table-cell","text-center",2,"cursor","pointer",3,"ngClass"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),A("ngModelChange",function(p){return V(n.filters.name,p)||(n.filters.name=p),p}),u("keydown",function(p){return n.onKeydown(p)}),s(),a(5,"button",5),u("click",function(){return n.search()}),f(6,"i",6),s(),a(7,"button",7),u("click",function(){return n.toggleFilters()}),c(8," Filters "),f(9,"i",8),s(),a(10,"button",9),u("click",function(){return n.createItem()}),f(11,"i",10),s()(),C(12,ke,19,13,"nav",11),a(13,"div",12)(14,"b")(15,"span",13),c(16),s()()(),a(17,"div",14)(18,"select",15),u("ngModelChange",function(p){return n.changePerPage(p)}),A("ngModelChange",function(p){return V(n.selectedPerPage,p)||(n.selectedPerPage=p),p}),C(19,Fe,2,2,"option",16),s()()()(),C(20,Te,4,0,"div",17),a(21,"div",18)(22,"div",19)(23,"div",20)(24,"div",21)(25,"div",22)(26,"h5",23),c(27,"Search Filters"),s(),a(28,"div",24)(29,"div",25)(30,"label",26),c(31,"Name"),s(),a(32,"input",27),A("ngModelChange",function(p){return V(n.filters.name,p)||(n.filters.name=p),p}),s()()()()()()()(),C(33,Ae,36,40,"div",28),s()),e&2&&(o(4),O("ngModel",n.filters.name),o(3),l("ngClass",h(12,Se,n.isFiltersOpen,!n.isFiltersOpen)),Y("aria-expanded",n.isFiltersOpen),o(2),l("ngClass",n.isFiltersOpen?"fa-arrow-up-wide-short":"fa-arrow-down-wide-short"),o(3),l("ngIf",n.pagination.useful),o(4),X("",n.totals.count," sur ",n.totals.countAll,""),o(2),O("ngModel",n.selectedPerPage),o(),l("ngForOf",ee(15,we)),o(),l("ngIf",n.loading),o(12),O("ngModel",n.filters.name),o(),l("ngIf",!n.loading))},dependencies:[ae,ne,ie,re,oe,he,_e,fe,pe,ue,de,ge,Ce],styles:[".nga-btn-search[_ngcontent-%COMP%]{-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12);box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;padding:.5rem;font-size:.81rem;border:0;-webkit-border-radius:.125rem;border-radius:.125rem}.nga-btn-search[_ngcontent-%COMP%]:hover, .nga-btn-search[_ngcontent-%COMP%]:active, .nga-btn-search[_ngcontent-%COMP%]:focus{-webkit-box-shadow:0 5px 11px 0 rgba(0,0,0,.18),0 4px 15px 0 rgba(0,0,0,.15);box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;outline:0}.nga-btn-search-primary[_ngcontent-%COMP%]{border:2px solid #4285f4!important;color:#4285f4!important;background-color:transparent!important}.nga-btn-search-black[_ngcontent-%COMP%]{border:2px solid #000!important;color:#000!important;background-color:transparent!important}.page-link[_ngcontent-%COMP%]{cursor:pointer}"]})};export{Ie as ItemComponent};
