import{c as L,d as s,e as M,f as U,k as D,n as O,q as H,v as R,w as G,x as j}from"./chunk-64EURP63.js";import{a as q}from"./chunk-5AHPVKNB.js";import{a as x}from"./chunk-55TYXLXT.js";import"./chunk-MZP3BXEJ.js";import{a as A,b as $}from"./chunk-5ZQZCC6I.js";import{i as w,m as F}from"./chunk-TLX3ODY4.js";import{B as c,Ia as k,La as m,Qa as v,R as E,Va as S,W as g,_a as u,fb as a,ib as o,jb as n,kb as d,p as y,pb as f,qb as C,sb as T,tb as l,ub as N}from"./chunk-OBRB6GQ7.js";var I="continents",P="Continent",p={id:0,code:"",name:"",wikipediaLink:"",area:0,population:0,countriesCount:0,density:0};var _={headers:new A({"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, HEAD,POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, X-Requested-With, contentType,Content-Type, Accept, Authorization"})},b=class r{constructor(t){this.http=t;this.backendUrl=q.backend}backendUrl;getItem(t){let i=`${this.backendUrl}/${I}/${t}`;return this.http.get(i).pipe(c(this.handleError(`getItem id=${t}`,p)))}updateItem(t){let i=t.id,e=`${this.backendUrl}/${I}/${i}`;return this.http.put(e,t,_).pipe(c(this.handleError(`updateItem id=${i}`,t)))}createItem(t){let i=JSON.stringify(t),e=`${this.backendUrl}/${I}`;return this.http.post(e,i,_).pipe(c(this.handleError("createItem",t)))}deleteItem(t){let i=t.id,e=`${this.backendUrl}/${I}/${i}`;return this.http.delete(e,_).pipe(c(this.handleError(`deleteItem id=${i}`,t)))}handleError(t="operation",i={}){return e=>(console.error(`${t} failed: ${e.message}`),y(i))}static \u0275fac=function(i){return new(i||r)(g($))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};function W(r,t){r&1&&(o(0,"div",41)(1,"span",42),l(2,"Code is required"),n()())}function J(r,t){r&1&&(o(0,"div",41)(1,"span",42),l(2,"Code must be at least 2 characters"),n()())}function X(r,t){if(r&1&&(o(0,"div"),u(1,W,3,0,"div",40)(2,J,3,0,"div",40),n()),r&2){let i=C();m(),a("ngIf",i.code==null||i.code.errors==null?null:i.code.errors.required),m(),a("ngIf",i.code==null||i.code.errors==null?null:i.code.errors.minlength)}}function K(r,t){r&1&&(o(0,"div",41)(1,"span",42),l(2,"Name is required"),n()())}function Q(r,t){if(r&1&&(o(0,"div"),u(1,K,3,0,"div",40),n()),r&2){let i=C();m(),a("ngIf",i.name==null||i.name.errors==null?null:i.name.errors.required)}}function Y(r,t){r&1&&(o(0,"div")(1,"span",42),l(2,"Area is required"),n()())}function Z(r,t){r&1&&(o(0,"div")(1,"span",42),l(2,"Numbers only"),n()())}function ee(r,t){r&1&&(o(0,"div")(1,"span",42),l(2,"Population is required"),n()())}function te(r,t){r&1&&(o(0,"div")(1,"span",42),l(2,"Numbers only"),n()())}function ie(r,t){r&1&&(o(0,"div")(1,"span",42),l(2,"Country count is required"),n()())}function ne(r,t){r&1&&(o(0,"div")(1,"span",42),l(2,"Numbers only"),n()())}var V=class r{constructor(t,i,e){this.fb=t;this.route=i;this.itemService=e;this.formItem=this.fb.group({id:p.id,code:[p.code,[s.required,s.minLength(2)]],name:[p.name,[s.required]],wikipediaLink:p.wikipediaLink,area:[p.area,[s.required,s.pattern("^[0-9]*$")]],population:[p.population,[s.required,s.pattern("^[0-9]*$")]],countriesCount:[p.countriesCount,[s.required,s.pattern("^[0-9]*$")]],density:p.density}),this.getItemById()}name_default=P;formItem;item;get name(){return this.formItem.get("name")}get code(){return this.formItem.get("code")}get area(){return this.formItem.get("area")}get population(){return this.formItem.get("population")}get countriesCount(){return this.formItem.get("countriesCount")}get density(){return this.formItem.get("density")}getItemById(){this.route.params.subscribe(t=>{let i=t.id;i!==void 0&&this.getItem(parseInt(i))})}getItem(t){t!==0&&this.itemService.getItem(t).subscribe(i=>{this.item=i,this.setForm(this.formItem,i)})}setForm(t,i){t.setValue(i)}resetForm(){this.formItem.patchValue(p)}onCreate(){this.resetForm()}onCopy(){this.formItem.patchValue({id:0})}onUpdate(){this.formItem.value.id>0?this.updateItem(this.formItem.value):this.createItem(this.formItem.value)}onDelete(){let t=this.formItem.value.id;t!=null&&t!=null&&this.deleteItem(this.item)}updateItem(t){this.itemService.updateItem(t).subscribe(i=>{this.setForm(this.formItem,i)})}deleteItem(t){this.itemService.deleteItem(t).subscribe(()=>{this.resetForm()})}createItem(t){this.itemService.createItem(t).subscribe(i=>{this.setForm(this.formItem,i)})}static \u0275fac=function(i){return new(i||r)(v(R),v(x),v(b))};static \u0275cmp=S({type:r,selectors:[["app-item"]],decls:64,vars:15,consts:[[1,"container"],[1,"row","pt-5","pb-5"],[1,"col"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-12","col-xl-4","col-xxl-4","col-lg-4","col-md-4","col-sm-12","mb-2"],[1,"h3"],[1,"col-12","col-xl-8","col-xxl-8","col-lg-8","col-md-8","col-sm-12","text-center"],["type","button",1,"btn","btn-primary","btn-sm","me-2",3,"click"],[1,"fas","fa-plus"],["type","button",1,"btn","btn-primary","btn-sm","me-2",3,"click","disabled"],[1,"fas","fa-save"],[1,"fas","fa-copy"],[1,"fas","fa-trash-alt"],[1,"row","g-3",3,"formGroup"],[1,"col-md-2"],["for","id",1,"form-label"],["type","text","id","id","formControlName","id","readonly","",1,"form-control"],["for","code",1,"form-label"],["type","text","id","code","formControlName","code",1,"form-control"],[4,"ngIf"],[1,"col-md-4"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["for","wikipediaLink",1,"form-label"],[1,"input-group"],["id","wikipediaLinkShow",1,"input-group-text"],["target","_blank",3,"href"],[1,"text-success","fa-brands","fa-wikipedia-w"],["type","text","id","wikipediaLink","aria-describedby","wikipediaLink","formControlName","wikipediaLink",1,"form-control"],[1,"col-md-3"],["for","area",1,"form-label"],["type","text","id","area","formControlName","area",1,"form-control"],["for","population",1,"form-label"],["type","text","id","population","formControlName","population",1,"form-control"],["for","countriesCount",1,"form-label"],["type","text","id","countriesCount","formControlName","countriesCount",1,"form-control"],["for","density",1,"form-label"],["type","text","id","countriesCount","formControlName","density","readonly","",1,"form-control"],["class","pt-2",4,"ngIf"],[1,"pt-2"],[1,"pt-2","text-danger"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"span",7),l(8),n()(),o(9,"div",8)(10,"button",9),f("click",function(){return e.onCreate()}),d(11,"i",10),n(),o(12,"button",11),f("click",function(){return e.onUpdate()}),d(13,"i",12),n(),o(14,"button",11),f("click",function(){return e.onCopy()}),d(15,"i",13),n(),o(16,"button",11),f("click",function(){return e.onDelete()}),d(17,"i",14),n()()(),d(18,"hr"),o(19,"form",15)(20,"div",16)(21,"label",17),l(22,"Id"),n(),d(23,"input",18),n(),o(24,"div",16)(25,"label",19),l(26,"Code"),n(),d(27,"input",20),u(28,X,3,2,"div",21),n(),o(29,"div",22)(30,"label",23),l(31,"Name"),n(),d(32,"input",24),u(33,Q,2,1,"div",21),n(),o(34,"div",22)(35,"label",25),l(36,"Wikipedia"),n(),o(37,"div",26)(38,"span",27)(39,"a",28),d(40,"i",29),n()(),d(41,"input",30),n()(),o(42,"div",31)(43,"label",32),l(44,"Area"),n(),d(45,"input",33),u(46,Y,3,0,"div",21)(47,Z,3,0,"div",21),n(),o(48,"div",31)(49,"label",34),l(50,"Population"),n(),d(51,"input",35),u(52,ee,3,0,"div",21)(53,te,3,0,"div",21),n(),o(54,"div",31)(55,"label",36),l(56,"Country Count"),n(),d(57,"input",37),u(58,ie,3,0,"div",21)(59,ne,3,0,"div",21),n(),o(60,"div",31)(61,"label",38),l(62,"Density"),n(),d(63,"input",39),n()()()()()()()),i&2&&(m(8),N(e.name_default),m(4),a("disabled",e.formItem.invalid||e.formItem.pristine&&!e.item),m(2),a("disabled",e.formItem.invalid||e.formItem.pristine&&!e.item),m(2),a("disabled",e.formItem.invalid||e.formItem.pristine&&!e.item),m(3),a("formGroup",e.formItem),m(9),a("ngIf",(e.code==null?null:e.code.invalid)&&(e.code==null?null:e.code.dirty)),m(5),a("ngIf",(e.name==null?null:e.name.invalid)&&(e.name==null?null:e.name.dirty)),m(6),T("href","https://fr.wikipedia.org/wiki/",e.formItem.value.wikipediaLink,"",k),m(7),a("ngIf",e.area==null||e.area.errors==null?null:e.area.errors.required),m(),a("ngIf",e.area==null||e.area.errors==null?null:e.area.errors.pattern),m(5),a("ngIf",e.population==null||e.population.errors==null?null:e.population.errors.required),m(),a("ngIf",e.population==null||e.population.errors==null?null:e.population.errors.pattern),m(5),a("ngIf",e.countriesCount==null||e.countriesCount.errors==null?null:e.countriesCount.errors.required),m(),a("ngIf",e.countriesCount==null||e.countriesCount.errors==null?null:e.countriesCount.errors.pattern))},dependencies:[F,w,G,D,L,M,U,j,O,H],encapsulation:2})};export{V as ItemComponent};
