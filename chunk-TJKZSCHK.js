import{c as $,e as N,f as U,k as D,n as O,q as R,v as w,w as H,x as G}from"./chunk-64EURP63.js";import{a as M}from"./chunk-5AHPVKNB.js";import{a as k}from"./chunk-55TYXLXT.js";import"./chunk-MZP3BXEJ.js";import{a as A,b as F}from"./chunk-5ZQZCC6I.js";import{m as S}from"./chunk-TLX3ODY4.js";import{B as a,La as s,Qa as f,R as y,Va as g,W as _,a as E,fb as p,ib as o,jb as r,kb as m,p as h,pb as c,t as C,tb as u,ub as T}from"./chunk-OBRB6GQ7.js";var d="professions",j="professions",l={id:0,name:""};var v={headers:new A({"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, HEAD,POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, X-Requested-With, contentType,Content-Type, Accept, Authorization"})},I=class n{constructor(e){this.http=e;this.backendUrl=M.backend}backendUrl;getItem(e){let t=`${this.backendUrl}/${d}/${e}`;return this.http.get(t).pipe(C(i=>i.data),a(()=>h(l)))}updateItem(e){let t=e.id,i=`${this.backendUrl}/${d}/${t}`;return this.http.put(i,e,v).pipe(a(this.handleError(`updateItem id=${t}`,e)))}createItem(e){let t=JSON.stringify(e),i=`${this.backendUrl}/${d}`;return this.http.post(i,t,v).pipe(a(this.handleError("createItem",e)))}deleteItem(e){let t=e.id,i=`${this.backendUrl}/${d}/${t}`;return this.http.delete(i,v).pipe(a(this.handleError(`deleteItem id=${t}`,e)))}handleError(e="operation",t={}){return i=>(console.error(`${e} failed: ${i.message}`),h(t))}static \u0275fac=function(t){return new(t||n)(_(F))};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};var L=class n{constructor(e,t,i){this.fb=e;this.route=t;this.itemService=i;this.formItem=this.fb.group({id:l.id,name:[l.name]}),this.getItemById()}name_default=j;formItem;item;showDelete=!1;get name(){return this.formItem.get("name")}getItemById(){this.route.params.subscribe(e=>{let t=e.id;t!==void 0&&this.getItem(parseInt(t))})}getItem(e){e!==0&&this.itemService.getItem(e).subscribe(t=>{this.item=t,this.formItem.setValue(t)})}setForm(e,t){e.setValue(t)}resetForm(){this.formItem.patchValue(E({},l))}onCreate(){this.resetForm()}onCopy(){this.formItem.patchValue({id:0})}onUpdate(){let e=this.formItem.value;e.id>0?this.updateItem(e):this.createItem(e)}updateItem(e){this.itemService.updateItem(e).subscribe(t=>{this.setForm(this.formItem,t)})}deleteItem(e){this.itemService.deleteItem(e).subscribe(()=>{this.resetForm()})}createItem(e){this.itemService.createItem(e).subscribe(t=>{this.setForm(this.formItem,t)})}onDelete(){let e=this.formItem.value.id;e!=null&&e!=null&&this.deleteItem(this.item)}static \u0275fac=function(t){return new(t||n)(f(w),f(k),f(I))};static \u0275cmp=g({type:n,selectors:[["app-item"]],decls:28,vars:5,consts:[[1,"container"],[1,"row","pt-5","pb-5"],[1,"col"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-12","col-xl-4","col-xxl-4","col-lg-4","col-md-4","col-sm-12","mb-2"],[1,"h3"],[1,"col-12","col-xl-8","col-xxl-8","col-lg-8","col-md-8","col-sm-12","text-center"],["type","button",1,"btn","btn-primary","btn-sm","me-2",3,"click"],[1,"fas","fa-plus"],["type","button",1,"btn","btn-primary","btn-sm","me-2",3,"click","disabled"],[1,"fas","fa-save"],[1,"fas","fa-copy"],[1,"fas","fa-trash-alt"],[1,"row","g-3",3,"formGroup"],[1,"col-md-2"],["for","id",1,"form-label"],["type","text","id","id","formControlName","id","readonly","",1,"form-control","form-control-sm"],[1,"col-md-4"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control","form-control-sm"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"span",7),u(8),r()(),o(9,"div",8)(10,"button",9),c("click",function(){return i.onCreate()}),m(11,"i",10),r(),o(12,"button",11),c("click",function(){return i.onUpdate()}),m(13,"i",12),r(),o(14,"button",11),c("click",function(){return i.onCopy()}),m(15,"i",13),r(),o(16,"button",11),c("click",function(){return i.onDelete()}),m(17,"i",14),r()()(),m(18,"hr"),o(19,"form",15)(20,"div",16)(21,"label",17),u(22,"Id"),r(),m(23,"input",18),r(),o(24,"div",19)(25,"label",20),u(26,"Nom"),r(),m(27,"input",21),r()()()()()()()),t&2&&(s(8),T(i.name_default),s(4),p("disabled",i.formItem.invalid||i.formItem.pristine&&!i.item),s(2),p("disabled",i.formItem.invalid||i.formItem.pristine&&!i.item),s(2),p("disabled",i.formItem.invalid||i.formItem.pristine&&!i.item),s(3),p("formGroup",i.formItem))},dependencies:[S,H,D,$,N,U,G,O,R],encapsulation:2})};export{L as ItemComponent};
